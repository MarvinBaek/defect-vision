<form id="uploadForm" enctype="multipart/form-data">
  <input type="file" name="file" accept="video/*" />
  <button type="submit">업로드</button>
</form>
<img id="resultImg" alt="스트리밍 결과" />

<script>
  const form = document.getElementById('uploadForm');
  const img = document.getElementById('resultImg');

  form.onsubmit = async (e) => {
    e.preventDefault();

    const fileInput = form.querySelector('input[type="file"]');
    if (!fileInput.files.length) {
      alert("파일을 선택하세요");
      return;
    }

    const formData = new FormData();
    formData.append('file', fileInput.files[0]);

    // 1) 영상 업로드
    const uploadRes = await fetch('http://localhost:8000/predict/upload', {
      method: 'POST',
      body: formData
    });

    if (!uploadRes.ok) {
      alert("업로드 실패");
      return;
    }

    // 2) 업로드 성공하면 img src를 GET 스트리밍 주소로 변경
    img.src = 'http://localhost:8000/predict/stream';
  };
</script>
